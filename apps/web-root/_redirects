# Auth callbacks and share links â€” route to JS redirect page that preserves hash + query params
/?type=invite /auth-redirect.html 200
/?type=recovery /auth-redirect.html 200
/?type=email_change /auth-redirect.html 200
/?type=signup /auth-redirect.html 200
/?share=:share /auth-redirect.html 200

# Device routing
/ /m/ 302 User-Agent=Android|iPhone|iPad|iPod|Mobile
/ /d/ 302

# Clean /m and /d paths
/m /m/ 301
/d /d/ 301

# Route /d to /m on mobile
/d/* /m/:splat 302 User-Agent=Android|iPhone|iPad|iPod|Mobile

# Route /m to /d on desktop
/m/* /d/:splat 302 User-Agent=Windows|Macintosh|Linux|X11

# SPA fallbacks
/m/* /m/index.html 200
/d/* /d/index.html 200
