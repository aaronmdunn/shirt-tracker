const CACHE_NAME="shirt-tracker-v2.0.8",APP_SHELL=["./","./index.html"];self.addEventListener("install",t=>{t.waitUntil(caches.open(CACHE_NAME).then(e=>e.addAll(APP_SHELL))),self.skipWaiting()}),self.addEventListener("activate",t=>{t.waitUntil(caches.keys().then(e=>Promise.all(e.filter(n=>n.startsWith("shirt-tracker-v")&&n!==CACHE_NAME).map(n=>caches.delete(n))))),self.clients.claim()}),self.addEventListener("fetch",t=>{const e=new URL(t.request.url);if(t.request.method!=="GET"||e.origin!==self.location.origin)return;const n=new URL(self.registration.scope).pathname,r=e.pathname.startsWith(n)?e.pathname.slice(n.length):null;(r===""||r==="index.html")&&t.respondWith(caches.open(CACHE_NAME).then(l=>l.match(t.request).then(s=>{const a=fetch(t.request).then(i=>(i.ok&&l.put(t.request,i.clone()),i)).catch(()=>null);return s||a.then(i=>i||new Response('<!DOCTYPE html><html><body style="font-family:sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh;margin:0;background:#0a0a0a;color:#aaa;"><p>You are offline. Please reconnect and reload.</p></body></html>',{headers:{"Content-Type":"text/html"}}))})))});
